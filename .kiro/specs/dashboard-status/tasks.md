# Implementation Plan

## Tasks

- [x] 1. 日付計算ユーティリティの作成
- [x] 1.1 (P) 日付計算関数を共通ユーティリティとして実装する
  - 2つの日付間の日数差を計算する関数を作成する
  - 日付に日数を加算する関数を作成する
  - 今日の日付を時刻正規化して取得する関数を作成する
  - 時刻を00:00:00に正規化して時間帯依存を排除する
  - _Requirements: 1.3, 3.1, 3.2_

- [x] 1.2 GanttChartコンポーネントを共通ユーティリティを参照するよう更新する
  - 既存のローカル日付計算関数を削除する
  - 共通ユーティリティからインポートするよう変更する
  - 既存機能が正常に動作することを確認する
  - _Requirements: 1.3_

- [x] 2. ダッシュボード集計フックの実装
- [x] 2.1 プロジェクト別のチケット統計を算出する機能を実装する
  - プロジェクトごとの総チケット数を計算する
  - 親チケット数（サブタスクを持つチケット）を計算する
  - 未割り当てチケット数を計算する
  - プロジェクトの残日数または期限超過日数を計算する
  - _Requirements: 1.1, 1.3, 2.1, 2.3_

- [x] 2.2 期限関連の集計を算出する機能を実装する
  - 期限を超過したチケット数を計算する
  - 7日以内に期限を迎えるチケット数を計算する
  - プロジェクトごとにこれらの警告情報を集約する
  - _Requirements: 3.1, 3.2_

- [x] 2.3 担当者別のチケット分布を算出する機能を実装する
  - プロジェクト内の担当者ごとのチケット数を計算する
  - 全プロジェクト横断の担当者稼働状況を計算する
  - 担当者名とチケット数のペアでデータを構築する
  - _Requirements: 2.2, 5.2_

- [x] 2.4 全体統計を算出する機能を実装する
  - 全プロジェクトの総チケット数を計算する
  - 全体の期限超過・期限間近チケット数を集計する
  - 計算結果をメモ化して再計算を最適化する
  - _Requirements: 5.1_

- [x] 3. 警告アイコンの追加
- [x] 3.1 (P) 期限超過警告用のアイコンコンポーネントを追加する
  - 既存のアイコンコンポーネントと同じパターンで実装する
  - 三角形の警告アイコンを作成する
  - サイズと色をカスタマイズ可能にする
  - _Requirements: 3.3_

- [x] 4. ダッシュボードUIの拡張
- [x] 4.1 拡張統計セクションを実装する
  - 既存の4つの統計カード（総数・進行中・完了・計画中）を維持する
  - 総チケット数を表示する統計カードを追加する
  - 期限超過チケット数を警告色で表示する
  - 期限間近チケット数を注意色で表示する
  - _Requirements: 5.1, 5.3_

- [x] 4.2 担当者稼働状況セクションを実装する
  - 各担当者の担当チケット数を一覧表示する
  - 担当者名とチケット数を見やすくレイアウトする
  - _Requirements: 5.2_

- [x] 4.3 プロジェクトカードの情報を拡充する
  - プロジェクトの開始日・終了日を表示する
  - 残日数または期限超過日数を表示する
  - 総チケット数と親チケット数を表示する
  - 未割り当てチケット数を表示する
  - カード形式でレスポンシブに配置する
  - _Requirements: 1.1, 1.2, 1.3, 1.4, 2.1, 2.3_

- [x] 4.4 担当者別チケット数をプロジェクトカードに表示する
  - プロジェクト内の担当者ごとのチケット数を表示する
  - 上位担当者と「他N名」形式で簡潔に表示する
  - _Requirements: 2.2_

- [x] 4.5 期限警告表示を実装する
  - 期限超過チケットがあるプロジェクトに警告アイコンを表示する
  - 期限超過チケット数を警告色でハイライトする
  - 7日以内期限チケット数を注意色で表示する
  - _Requirements: 3.1, 3.2, 3.3_

- [x] 5. クイックアクセス機能の実装
- [x] 5.1 プロジェクトカードからタイムライン画面への遷移を実装する
  - プロジェクトカード全体をクリック可能にする
  - クリック時に該当プロジェクトを選択してタイムライン画面に遷移する
  - 各カードにタイムラインへのリンクボタンを表示する
  - _Requirements: 4.1, 4.3_

- [x] 5.2 警告エリアからの遷移を実装する
  - 期限警告表示エリアをクリック可能にする
  - クリック時に該当プロジェクトのタイムライン画面に遷移する
  - _Requirements: 4.2_

- [x] 6. 統合とダークモード対応
- [x] 6.1 集計フックをダッシュボードに統合する
  - ダッシュボードセクションで集計フックを呼び出す
  - 集計結果を各UIコンポーネントに反映する
  - 空データ時のデフォルト表示を確認する
  - _Requirements: 1.1, 1.3, 2.1, 2.2, 2.3, 3.1, 3.2, 5.1, 5.2_

- [x] 6.2 全UIコンポーネントのダークモード対応を確認する
  - 新規追加した統計カードのダークモードスタイルを調整する
  - 警告アイコンと警告色のダークモード表示を確認する
  - 担当者稼働状況セクションのダークモード対応を確認する
  - 既存のTailwind CSSパターンに準拠する
  - _Requirements: 1.4_
